{"format_version":"1.1","terraform_version":"1.3.3","variables":{"location":{"value":"North Europe"},"rsrc_name":{"value":"gitbucketv3"}},"planned_values":{"root_module":{"resources":[{"address":"azurerm_resource_group.mygroup","mode":"managed","type":"azurerm_resource_group","name":"mygroup","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"northeurope","name":"gitbucketv3","tags":null,"timeouts":null},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.app.azurerm_linux_web_app.myapp","mode":"managed","type":"azurerm_linux_web_app","name":"myapp","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"app_settings":{"GITBUCKET_DB_PASSWORD":"p@ssw0rd","GITBUCKET_DB_URL":"jdbc:postgresql://psql1337.postgres.database.azure.com:5432/gitbucket","GITBUCKET_DB_USER":"psqladmin","GITBUCKET_HOME":"/mnt/bucket"},"backup":[],"client_affinity_enabled":false,"client_certificate_enabled":false,"client_certificate_mode":"Required","connection_string":[],"enabled":true,"https_only":false,"identity":[],"location":"northeurope","logs":[],"name":"another-gitbucket","resource_group_name":"gitbucketv3","site_config":[{"always_on":true,"api_definition_url":null,"api_management_api_id":null,"app_command_line":null,"application_stack":[{"docker_image":null,"docker_image_tag":null,"dotnet_version":null,"java_server":"TOMCAT","java_server_version":"9","java_version":"java11","node_version":null,"php_version":null,"python_version":null,"ruby_version":null}],"auto_heal_enabled":null,"auto_heal_setting":[],"container_registry_managed_identity_client_id":null,"container_registry_use_managed_identity":false,"cors":[],"ftps_state":"Disabled","health_check_path":null,"http2_enabled":false,"load_balancing_mode":"LeastRequests","local_mysql_enabled":false,"managed_pipeline_mode":"Integrated","minimum_tls_version":"1.2","remote_debugging_enabled":false,"scm_minimum_tls_version":"1.2","scm_use_main_ip_restriction":false,"use_32_bit_worker":true,"vnet_route_all_enabled":true,"websockets_enabled":false}],"sticky_settings":[],"storage_account":[{"access_key":"DPiZPTmbLDVcufw8ZK80a32gKb10r6ifwdTNUkLcuMp6TtP92+2CgAEQdKzyuIRSgRosj0c3nLTZ+AStd83KeQ==","account_name":"rand","mount_path":"/mnt","name":"my_storage","share_name":"share2","type":"AzureFiles"}],"tags":null,"timeouts":null},"sensitive_values":{"app_settings":{"GITBUCKET_DB_PASSWORD":true},"auth_settings":[],"backup":[],"connection_string":[],"identity":[],"logs":[],"outbound_ip_address_list":[],"possible_outbound_ip_address_list":[],"site_config":[{"application_stack":[{}],"auto_heal_setting":[],"cors":[],"default_documents":[],"ip_restriction":[],"scm_ip_restriction":[]}],"site_credential":[],"sticky_settings":[],"storage_account":true}},{"address":"module.app.azurerm_service_plan.myplan","mode":"managed","type":"azurerm_service_plan","name":"myplan","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"app_service_environment_id":null,"location":"northeurope","name":"appGitbucketServicePlan","os_type":"Linux","per_site_scaling_enabled":false,"resource_group_name":"gitbucketv3","sku_name":"S1","tags":null,"timeouts":null,"zone_balancing_enabled":null},"sensitive_values":{}}],"address":"module.app"},{"resources":[{"address":"module.psql.azurerm_postgresql_flexible_server.mydbserver","mode":"managed","type":"azurerm_postgresql_flexible_server","name":"mydbserver","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"administrator_login":"psqladmin","administrator_password":"p@ssw0rd","create_mode":null,"geo_redundant_backup_enabled":false,"high_availability":[],"location":"northeurope","maintenance_window":[],"name":"bucketv3","point_in_time_restore_time_in_utc":null,"resource_group_name":"gitbucketv3","sku_name":"B_Standard_B1ms","source_server_id":null,"storage_mb":32768,"tags":null,"timeouts":null,"version":"14","zone":null},"sensitive_values":{"administrator_password":true,"high_availability":[],"maintenance_window":[]}},{"address":"module.psql.azurerm_postgresql_flexible_server_configuration.ssloff","mode":"managed","type":"azurerm_postgresql_flexible_server_configuration","name":"ssloff","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"require_secure_transport","timeouts":null,"value":"off"},"sensitive_values":{}},{"address":"module.psql.azurerm_postgresql_flexible_server_database.mydb","mode":"managed","type":"azurerm_postgresql_flexible_server_database","name":"mydb","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"charset":"utf8","collation":"en_US.utf8","name":"gitbucket","timeouts":null},"sensitive_values":{}},{"address":"module.psql.azurerm_private_dns_zone.mydns","mode":"managed","type":"azurerm_private_dns_zone","name":"mydns","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"psql1337.postgres.database.azure.com","resource_group_name":"gitbucketv3","tags":null,"timeouts":null},"sensitive_values":{"soa_record":[]}},{"address":"module.psql.azurerm_private_dns_zone_virtual_network_link.mylink","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"mylink","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"exampleVnetZone.com","private_dns_zone_name":"psql1337.postgres.database.azure.com","registration_enabled":false,"resource_group_name":"gitbucketv3","tags":null,"timeouts":null},"sensitive_values":{}}],"address":"module.psql"},{"resources":[{"address":"module.shared.azurerm_storage_share.filesh","mode":"managed","type":"azurerm_storage_share","name":"filesh","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_tier":"TransactionOptimized","acl":[],"enabled_protocol":"SMB","id":"https://rand.file.core.windows.net/share2","metadata":{},"name":"share2","quota":5,"resource_manager_id":"/subscriptions/55003a8e-59d0-48b5-bf05-6cc7a7d7154d/resourceGroups/NetworkWatcherRG/providers/Microsoft.Storage/storageAccounts/rand/fileServices/default/fileshares/share2","storage_account_name":"rand","timeouts":null,"url":"https://rand.file.core.windows.net/share2"},"sensitive_values":{"acl":[],"metadata":{}}},{"address":"module.shared.azurerm_storage_share_directory.dir","mode":"managed","type":"azurerm_storage_share_directory","name":"dir","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"https://rand.file.core.windows.net/share2/bucket","metadata":{},"name":"bucket","share_name":"share2","storage_account_name":"rand","timeouts":null},"sensitive_values":{"metadata":{}}}],"address":"module.shared"},{"resources":[{"address":"module.vnet.azurerm_subnet.appsub","mode":"managed","type":"azurerm_subnet","name":"appsub","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.26.64/26"],"delegation":[{"name":"del","service_delegation":[{"actions":null,"name":"Microsoft.Web/serverFarms"}]}],"name":"gitbucket","resource_group_name":"gitbucketv3","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ntwrk"},"sensitive_values":{"address_prefixes":[false],"delegation":[{"service_delegation":[{}]}]}},{"address":"module.vnet.azurerm_subnet.psqlsub","mode":"managed","type":"azurerm_subnet","name":"psqlsub","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.26.0/26"],"delegation":[{"name":"fs","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action"],"name":"Microsoft.DBforPostgreSQL/flexibleServers"}]}],"name":"pgsql","resource_group_name":"gitbucketv3","service_endpoint_policy_ids":null,"service_endpoints":["Microsoft.Storage"],"timeouts":null,"virtual_network_name":"ntwrk"},"sensitive_values":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false]}]}],"service_endpoints":[false]}},{"address":"module.vnet.azurerm_virtual_network.myvnet","mode":"managed","type":"azurerm_virtual_network","name":"myvnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.0.26.0/24"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"flow_timeout_in_minutes":null,"location":"northeurope","name":"ntwrk","resource_group_name":"gitbucketv3","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"subnet":[]}}],"address":"module.vnet"}]}},"resource_changes":[{"address":"azurerm_resource_group.mygroup","mode":"managed","type":"azurerm_resource_group","name":"mygroup","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"northeurope","name":"gitbucketv3","tags":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.app.azurerm_linux_web_app.myapp","module_address":"module.app","mode":"managed","type":"azurerm_linux_web_app","name":"myapp","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"app_settings":{"GITBUCKET_DB_PASSWORD":"p@ssw0rd","GITBUCKET_DB_URL":"jdbc:postgresql://psql1337.postgres.database.azure.com:5432/gitbucket","GITBUCKET_DB_USER":"psqladmin","GITBUCKET_HOME":"/mnt/bucket"},"backup":[],"client_affinity_enabled":false,"client_certificate_enabled":false,"client_certificate_mode":"Required","connection_string":[],"enabled":true,"https_only":false,"identity":[],"location":"northeurope","logs":[],"name":"another-gitbucket","resource_group_name":"gitbucketv3","site_config":[{"always_on":true,"api_definition_url":null,"api_management_api_id":null,"app_command_line":null,"application_stack":[{"docker_image":null,"docker_image_tag":null,"dotnet_version":null,"java_server":"TOMCAT","java_server_version":"9","java_version":"java11","node_version":null,"php_version":null,"python_version":null,"ruby_version":null}],"auto_heal_enabled":null,"auto_heal_setting":[],"container_registry_managed_identity_client_id":null,"container_registry_use_managed_identity":false,"cors":[],"ftps_state":"Disabled","health_check_path":null,"http2_enabled":false,"load_balancing_mode":"LeastRequests","local_mysql_enabled":false,"managed_pipeline_mode":"Integrated","minimum_tls_version":"1.2","remote_debugging_enabled":false,"scm_minimum_tls_version":"1.2","scm_use_main_ip_restriction":false,"use_32_bit_worker":true,"vnet_route_all_enabled":true,"websockets_enabled":false}],"sticky_settings":[],"storage_account":[{"access_key":"DPiZPTmbLDVcufw8ZK80a32gKb10r6ifwdTNUkLcuMp6TtP92+2CgAEQdKzyuIRSgRosj0c3nLTZ+AStd83KeQ==","account_name":"rand","mount_path":"/mnt","name":"my_storage","share_name":"share2","type":"AzureFiles"}],"tags":null,"timeouts":null},"after_unknown":{"app_settings":{},"auth_settings":true,"backup":[],"connection_string":[],"custom_domain_verification_id":true,"default_hostname":true,"id":true,"identity":[],"key_vault_reference_identity_id":true,"kind":true,"logs":[],"outbound_ip_address_list":true,"outbound_ip_addresses":true,"possible_outbound_ip_address_list":true,"possible_outbound_ip_addresses":true,"service_plan_id":true,"site_config":[{"application_stack":[{}],"auto_heal_setting":[],"cors":[],"default_documents":true,"detailed_error_logging_enabled":true,"health_check_eviction_time_in_min":true,"ip_restriction":true,"linux_fx_version":true,"remote_debugging_version":true,"scm_ip_restriction":true,"scm_type":true,"worker_count":true}],"site_credential":true,"sticky_settings":[],"storage_account":[{}],"virtual_network_subnet_id":true,"zip_deploy_file":true},"before_sensitive":false,"after_sensitive":{"app_settings":{"GITBUCKET_DB_PASSWORD":true},"auth_settings":[],"backup":[],"connection_string":[],"custom_domain_verification_id":true,"identity":[],"logs":[],"outbound_ip_address_list":[],"possible_outbound_ip_address_list":[],"site_config":[{"application_stack":[{}],"auto_heal_setting":[],"cors":[],"default_documents":[],"ip_restriction":[],"scm_ip_restriction":[]}],"site_credential":[],"sticky_settings":[],"storage_account":true}}},{"address":"module.app.azurerm_service_plan.myplan","module_address":"module.app","mode":"managed","type":"azurerm_service_plan","name":"myplan","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"app_service_environment_id":null,"location":"northeurope","name":"appGitbucketServicePlan","os_type":"Linux","per_site_scaling_enabled":false,"resource_group_name":"gitbucketv3","sku_name":"S1","tags":null,"timeouts":null,"zone_balancing_enabled":null},"after_unknown":{"id":true,"kind":true,"maximum_elastic_worker_count":true,"reserved":true,"worker_count":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.psql.azurerm_postgresql_flexible_server.mydbserver","module_address":"module.psql","mode":"managed","type":"azurerm_postgresql_flexible_server","name":"mydbserver","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"administrator_login":"psqladmin","administrator_password":"p@ssw0rd","create_mode":null,"geo_redundant_backup_enabled":false,"high_availability":[],"location":"northeurope","maintenance_window":[],"name":"bucketv3","point_in_time_restore_time_in_utc":null,"resource_group_name":"gitbucketv3","sku_name":"B_Standard_B1ms","source_server_id":null,"storage_mb":32768,"tags":null,"timeouts":null,"version":"14","zone":null},"after_unknown":{"backup_retention_days":true,"delegated_subnet_id":true,"fqdn":true,"high_availability":[],"id":true,"maintenance_window":[],"private_dns_zone_id":true,"public_network_access_enabled":true},"before_sensitive":false,"after_sensitive":{"administrator_password":true,"high_availability":[],"maintenance_window":[]}}},{"address":"module.psql.azurerm_postgresql_flexible_server_configuration.ssloff","module_address":"module.psql","mode":"managed","type":"azurerm_postgresql_flexible_server_configuration","name":"ssloff","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"require_secure_transport","timeouts":null,"value":"off"},"after_unknown":{"id":true,"server_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.psql.azurerm_postgresql_flexible_server_database.mydb","module_address":"module.psql","mode":"managed","type":"azurerm_postgresql_flexible_server_database","name":"mydb","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"charset":"utf8","collation":"en_US.utf8","name":"gitbucket","timeouts":null},"after_unknown":{"id":true,"server_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.psql.azurerm_private_dns_zone.mydns","module_address":"module.psql","mode":"managed","type":"azurerm_private_dns_zone","name":"mydns","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"psql1337.postgres.database.azure.com","resource_group_name":"gitbucketv3","tags":null,"timeouts":null},"after_unknown":{"id":true,"max_number_of_record_sets":true,"max_number_of_virtual_network_links":true,"max_number_of_virtual_network_links_with_registration":true,"number_of_record_sets":true,"soa_record":true},"before_sensitive":false,"after_sensitive":{"soa_record":[]}}},{"address":"module.psql.azurerm_private_dns_zone_virtual_network_link.mylink","module_address":"module.psql","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"mylink","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"exampleVnetZone.com","private_dns_zone_name":"psql1337.postgres.database.azure.com","registration_enabled":false,"resource_group_name":"gitbucketv3","tags":null,"timeouts":null},"after_unknown":{"id":true,"virtual_network_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.shared.azurerm_storage_share.filesh","module_address":"module.shared","mode":"managed","type":"azurerm_storage_share","name":"filesh","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["no-op"],"before":{"access_tier":"TransactionOptimized","acl":[],"enabled_protocol":"SMB","id":"https://rand.file.core.windows.net/share2","metadata":{},"name":"share2","quota":5,"resource_manager_id":"/subscriptions/55003a8e-59d0-48b5-bf05-6cc7a7d7154d/resourceGroups/NetworkWatcherRG/providers/Microsoft.Storage/storageAccounts/rand/fileServices/default/fileshares/share2","storage_account_name":"rand","timeouts":null,"url":"https://rand.file.core.windows.net/share2"},"after":{"access_tier":"TransactionOptimized","acl":[],"enabled_protocol":"SMB","id":"https://rand.file.core.windows.net/share2","metadata":{},"name":"share2","quota":5,"resource_manager_id":"/subscriptions/55003a8e-59d0-48b5-bf05-6cc7a7d7154d/resourceGroups/NetworkWatcherRG/providers/Microsoft.Storage/storageAccounts/rand/fileServices/default/fileshares/share2","storage_account_name":"rand","timeouts":null,"url":"https://rand.file.core.windows.net/share2"},"after_unknown":{},"before_sensitive":{"acl":[],"metadata":{}},"after_sensitive":{"acl":[],"metadata":{}}}},{"address":"module.shared.azurerm_storage_share_directory.dir","module_address":"module.shared","mode":"managed","type":"azurerm_storage_share_directory","name":"dir","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["no-op"],"before":{"id":"https://rand.file.core.windows.net/share2/bucket","metadata":{},"name":"bucket","share_name":"share2","storage_account_name":"rand","timeouts":null},"after":{"id":"https://rand.file.core.windows.net/share2/bucket","metadata":{},"name":"bucket","share_name":"share2","storage_account_name":"rand","timeouts":null},"after_unknown":{},"before_sensitive":{"metadata":{}},"after_sensitive":{"metadata":{}}}},{"address":"module.vnet.azurerm_subnet.appsub","module_address":"module.vnet","mode":"managed","type":"azurerm_subnet","name":"appsub","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.26.64/26"],"delegation":[{"name":"del","service_delegation":[{"actions":null,"name":"Microsoft.Web/serverFarms"}]}],"name":"gitbucket","resource_group_name":"gitbucketv3","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ntwrk"},"after_unknown":{"address_prefixes":[false],"delegation":[{"service_delegation":[{}]}],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[{"service_delegation":[{}]}]}}},{"address":"module.vnet.azurerm_subnet.psqlsub","module_address":"module.vnet","mode":"managed","type":"azurerm_subnet","name":"psqlsub","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.26.0/26"],"delegation":[{"name":"fs","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action"],"name":"Microsoft.DBforPostgreSQL/flexibleServers"}]}],"name":"pgsql","resource_group_name":"gitbucketv3","service_endpoint_policy_ids":null,"service_endpoints":["Microsoft.Storage"],"timeouts":null,"virtual_network_name":"ntwrk"},"after_unknown":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false]}]}],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true,"service_endpoints":[false]},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false]}]}],"service_endpoints":[false]}}},{"address":"module.vnet.azurerm_virtual_network.myvnet","module_address":"module.vnet","mode":"managed","type":"azurerm_virtual_network","name":"myvnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.0.26.0/24"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"flow_timeout_in_minutes":null,"location":"northeurope","name":"ntwrk","resource_group_name":"gitbucketv3","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"subnet":[]}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.3.3","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.shared.azurerm_storage_share.filesh","mode":"managed","type":"azurerm_storage_share","name":"filesh","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_tier":"TransactionOptimized","acl":[],"enabled_protocol":"SMB","id":"https://rand.file.core.windows.net/share2","metadata":{},"name":"share2","quota":5,"resource_manager_id":"/subscriptions/55003a8e-59d0-48b5-bf05-6cc7a7d7154d/resourceGroups/NetworkWatcherRG/providers/Microsoft.Storage/storageAccounts/rand/fileServices/default/fileshares/share2","storage_account_name":"rand","timeouts":null,"url":"https://rand.file.core.windows.net/share2"},"sensitive_values":{"acl":[],"metadata":{}}},{"address":"module.shared.azurerm_storage_share_directory.dir","mode":"managed","type":"azurerm_storage_share_directory","name":"dir","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"https://rand.file.core.windows.net/share2/bucket","metadata":{},"name":"bucket","share_name":"share2","storage_account_name":"rand","timeouts":null},"sensitive_values":{"metadata":{}},"depends_on":["module.shared.azurerm_storage_share.filesh"]},{"address":"module.shared.data.azurerm_storage_account.accnt","mode":"data","type":"azurerm_storage_account","name":"accnt","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access_tier":"Hot","account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":false,"azure_files_authentication":[],"custom_domain":null,"enable_https_traffic_only":true,"id":"/subscriptions/55003a8e-59d0-48b5-bf05-6cc7a7d7154d/resourceGroups/NetworkWatcherRG/providers/Microsoft.Storage/storageAccounts/rand","identity":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"location":"northeurope","min_tls_version":"TLS1_2","name":"rand","nfsv3_enabled":false,"primary_access_key":"DPiZPTmbLDVcufw8ZK80a32gKb10r6ifwdTNUkLcuMp6TtP92+2CgAEQdKzyuIRSgRosj0c3nLTZ+AStd83KeQ==","primary_blob_connection_string":"DefaultEndpointsProtocol=https;BlobEndpoint=https://rand.blob.core.windows.net/;AccountName=rand;AccountKey=DPiZPTmbLDVcufw8ZK80a32gKb10r6ifwdTNUkLcuMp6TtP92+2CgAEQdKzyuIRSgRosj0c3nLTZ+AStd83KeQ==","primary_blob_endpoint":"https://rand.blob.core.windows.net/","primary_blob_host":"rand.blob.core.windows.net","primary_connection_string":"DefaultEndpointsProtocol=https;AccountName=rand;AccountKey=DPiZPTmbLDVcufw8ZK80a32gKb10r6ifwdTNUkLcuMp6TtP92+2CgAEQdKzyuIRSgRosj0c3nLTZ+AStd83KeQ==;EndpointSuffix=core.windows.net","primary_dfs_endpoint":"https://rand.dfs.core.windows.net/","primary_dfs_host":"rand.dfs.core.windows.net","primary_file_endpoint":"https://rand.file.core.windows.net/","primary_file_host":"rand.file.core.windows.net","primary_location":"northeurope","primary_queue_endpoint":"https://rand.queue.core.windows.net/","primary_queue_host":"rand.queue.core.windows.net","primary_table_endpoint":"https://rand.table.core.windows.net/","primary_table_host":"rand.table.core.windows.net","primary_web_endpoint":"https://rand.z16.web.core.windows.net/","primary_web_host":"rand.z16.web.core.windows.net","queue_encryption_key_type":"Service","resource_group_name":"NetworkWatcherRG","secondary_access_key":"eV0bYX9As8w2FBi1VUBw1b5wsEcS6vcWJ+VV8yuPLz1dZpnu1Blvnwl9gHB7IW7tMSscNov3+Ubj+AStJd8eqw==","secondary_blob_connection_string":"","secondary_blob_endpoint":null,"secondary_blob_host":null,"secondary_connection_string":"DefaultEndpointsProtocol=https;AccountName=rand;AccountKey=eV0bYX9As8w2FBi1VUBw1b5wsEcS6vcWJ+VV8yuPLz1dZpnu1Blvnwl9gHB7IW7tMSscNov3+Ubj+AStJd8eqw==;EndpointSuffix=core.windows.net","secondary_dfs_endpoint":null,"secondary_dfs_host":null,"secondary_file_endpoint":null,"secondary_file_host":null,"secondary_location":"","secondary_queue_endpoint":null,"secondary_queue_host":null,"secondary_table_endpoint":null,"secondary_table_host":null,"secondary_web_endpoint":null,"secondary_web_host":null,"table_encryption_key_type":"Service","tags":{"ms-resource-usage":"azure-cloud-shell"},"timeouts":null},"sensitive_values":{"azure_files_authentication":[],"identity":[],"tags":{}}}],"address":"module.shared"}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","expressions":{"features":[{}]}}},"root_module":{"resources":[{"address":"azurerm_resource_group.mygroup","mode":"managed","type":"azurerm_resource_group","name":"mygroup","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.rsrc_name"]}},"schema_version":0}],"module_calls":{"app":{"source":"./modules/app","expressions":{"acc_name":{"references":["module.shared.acc_name","module.shared"]},"app_subnet":{"references":["module.vnet.app_subnet","module.vnet"]},"db_name":{"references":["module.psql.db_name","module.psql"]},"dns_name":{"references":["module.psql.dns_name","module.psql"]},"home":{"references":["module.shared.dir","module.shared"]},"key":{"references":["module.shared.key","module.shared"]},"location":{"references":["var.location"]},"pass":{"references":["module.psql.pass","module.psql"]},"rsrc_name":{"references":["var.rsrc_name"]},"share_name":{"references":["module.shared.share_name","module.shared"]},"user":{"references":["module.psql.user","module.psql"]}},"module":{"resources":[{"address":"azurerm_linux_web_app.myapp","mode":"managed","type":"azurerm_linux_web_app","name":"myapp","provider_config_key":"azurerm","expressions":{"app_settings":{"references":["var.home","var.dns_name","var.db_name","var.user","var.pass"]},"location":{"references":["var.location"]},"name":{"references":["var.app_name"]},"resource_group_name":{"references":["var.rsrc_name"]},"service_plan_id":{"references":["azurerm_service_plan.myplan.id","azurerm_service_plan.myplan"]},"site_config":[{"application_stack":[{"java_server":{"references":["var.jsrvr"]},"java_server_version":{"references":["var.jsver"]},"java_version":{"references":["var.jver"]}}],"vnet_route_all_enabled":{"constant_value":true}}],"storage_account":[{"access_key":{"references":["var.key"]},"account_name":{"references":["var.acc_name"]},"mount_path":{"constant_value":"/mnt"},"name":{"constant_value":"my_storage"},"share_name":{"references":["var.share_name"]},"type":{"constant_value":"AzureFiles"}}],"virtual_network_subnet_id":{"references":["var.app_subnet"]}},"schema_version":0},{"address":"azurerm_service_plan.myplan","mode":"managed","type":"azurerm_service_plan","name":"myplan","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.plan_name"]},"os_type":{"references":["var.os"]},"resource_group_name":{"references":["var.rsrc_name"]},"sku_name":{"references":["var.plan_sku"]}},"schema_version":0}],"variables":{"acc_name":{},"app_name":{"default":"another-gitbucket"},"app_subnet":{},"db_name":{},"dns_name":{},"home":{},"jsrvr":{"default":"TOMCAT"},"jsver":{"default":9},"jver":{"default":"java11"},"key":{"sensitive":true},"location":{},"os":{"default":"Linux"},"pass":{"sensitive":true},"plan_name":{"default":"appGitbucketServicePlan"},"plan_sku":{"default":"S1"},"rsrc_name":{},"share_name":{},"user":{}}}},"psql":{"source":"./modules/psql-srvr","expressions":{"location":{"references":["var.location"]},"rsrc_name":{"references":["var.rsrc_name"]},"subnet_id":{"references":["module.vnet.psql_subnet","module.vnet"]},"vnet_id":{"references":["module.vnet.vnet_id","module.vnet"]}},"module":{"outputs":{"db_name":{"expression":{"references":["var.db_name"]}},"dns_name":{"expression":{"references":["var.dns_name"]}},"pass":{"expression":{"references":["var.admin_pass"]}},"user":{"expression":{"references":["var.pg_admin"]}}},"resources":[{"address":"azurerm_postgresql_flexible_server.mydbserver","mode":"managed","type":"azurerm_postgresql_flexible_server","name":"mydbserver","provider_config_key":"azurerm","expressions":{"administrator_login":{"references":["var.pg_admin"]},"administrator_password":{"references":["var.admin_pass"]},"delegated_subnet_id":{"references":["var.subnet_id"]},"location":{"references":["var.location"]},"name":{"references":["var.dbserver_name"]},"private_dns_zone_id":{"references":["azurerm_private_dns_zone.mydns.id","azurerm_private_dns_zone.mydns"]},"resource_group_name":{"references":["var.rsrc_name"]},"sku_name":{"references":["var.db_sku"]},"storage_mb":{"references":["var.db_storage"]},"version":{"constant_value":14}},"schema_version":0,"depends_on":["azurerm_private_dns_zone_virtual_network_link.mylink"]},{"address":"azurerm_postgresql_flexible_server_configuration.ssloff","mode":"managed","type":"azurerm_postgresql_flexible_server_configuration","name":"ssloff","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"require_secure_transport"},"server_id":{"references":["azurerm_postgresql_flexible_server.mydbserver.id","azurerm_postgresql_flexible_server.mydbserver"]},"value":{"constant_value":"off"}},"schema_version":0},{"address":"azurerm_postgresql_flexible_server_database.mydb","mode":"managed","type":"azurerm_postgresql_flexible_server_database","name":"mydb","provider_config_key":"azurerm","expressions":{"charset":{"constant_value":"utf8"},"collation":{"constant_value":"en_US.utf8"},"name":{"references":["var.db_name"]},"server_id":{"references":["azurerm_postgresql_flexible_server.mydbserver.id","azurerm_postgresql_flexible_server.mydbserver"]}},"schema_version":0},{"address":"azurerm_private_dns_zone.mydns","mode":"managed","type":"azurerm_private_dns_zone","name":"mydns","provider_config_key":"azurerm","expressions":{"name":{"references":["var.dns_name"]},"resource_group_name":{"references":["var.rsrc_name"]}},"schema_version":0},{"address":"azurerm_private_dns_zone_virtual_network_link.mylink","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"mylink","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"exampleVnetZone.com"},"private_dns_zone_name":{"references":["azurerm_private_dns_zone.mydns.name","azurerm_private_dns_zone.mydns"]},"resource_group_name":{"references":["var.rsrc_name"]},"virtual_network_id":{"references":["var.vnet_id"]}},"schema_version":0}],"variables":{"admin_pass":{"default":"p@ssw0rd","sensitive":true},"db_name":{"default":"gitbucket"},"db_sku":{"default":"B_Standard_B1ms"},"db_storage":{"default":32768},"dbserver_name":{"default":"bucketv3"},"dns_name":{"default":"psql1337"},"location":{},"pg_admin":{"default":"psqladmin"},"rsrc_name":{},"subnet_id":{},"vnet_id":{}}}},"shared":{"source":"./modules/file-share","module":{"outputs":{"acc_name":{"expression":{"references":["var.strg_acc_name"]}},"dir":{"expression":{"references":["var.dir_name"]}},"key":{"expression":{"references":["data.azurerm_storage_account.accnt.primary_access_key","data.azurerm_storage_account.accnt"]}},"share_name":{"expression":{"references":["var.fshare_name"]}}},"resources":[{"address":"azurerm_storage_share.filesh","mode":"managed","type":"azurerm_storage_share","name":"filesh","provider_config_key":"azurerm","expressions":{"name":{"references":["var.fshare_name"]},"quota":{"references":["var.st_quota"]},"storage_account_name":{"references":["var.strg_acc_name"]}},"schema_version":2},{"address":"azurerm_storage_share_directory.dir","mode":"managed","type":"azurerm_storage_share_directory","name":"dir","provider_config_key":"azurerm","expressions":{"name":{"references":["var.dir_name"]},"share_name":{"references":["azurerm_storage_share.filesh.name","azurerm_storage_share.filesh"]},"storage_account_name":{"references":["var.strg_acc_name"]}},"schema_version":0},{"address":"data.azurerm_storage_account.accnt","mode":"data","type":"azurerm_storage_account","name":"accnt","provider_config_key":"azurerm","expressions":{"name":{"references":["var.strg_acc_name"]},"resource_group_name":{"constant_value":"NetworkWatcherRG"}},"schema_version":0}],"variables":{"dir_name":{"default":"bucket"},"fshare_name":{"default":"share2"},"st_quota":{"default":5},"strg_acc_name":{"default":"rand"}}}},"vnet":{"source":"./modules/virt-net","expressions":{"location":{"references":["var.location"]},"rsrc_name":{"references":["var.rsrc_name"]}},"module":{"outputs":{"app_subnet":{"expression":{"references":["azurerm_subnet.appsub.id","azurerm_subnet.appsub"]}},"psql_subnet":{"expression":{"references":["azurerm_subnet.psqlsub.id","azurerm_subnet.psqlsub"]}},"vnet_id":{"expression":{"references":["azurerm_virtual_network.myvnet.id","azurerm_virtual_network.myvnet"]}}},"resources":[{"address":"azurerm_subnet.appsub","mode":"managed","type":"azurerm_subnet","name":"appsub","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.app_pref"]},"delegation":[{"name":{"constant_value":"del"},"service_delegation":[{"name":{"constant_value":"Microsoft.Web/serverFarms"}}]}],"name":{"references":["var.app_sub_name"]},"resource_group_name":{"references":["var.rsrc_name"]},"virtual_network_name":{"references":["var.vnet_name"]}},"schema_version":0},{"address":"azurerm_subnet.psqlsub","mode":"managed","type":"azurerm_subnet","name":"psqlsub","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.pg_pref"]},"delegation":[{"name":{"constant_value":"fs"},"service_delegation":[{"actions":{"constant_value":["Microsoft.Network/virtualNetworks/subnets/join/action"]},"name":{"constant_value":"Microsoft.DBforPostgreSQL/flexibleServers"}}]}],"name":{"references":["var.db_sub_name"]},"resource_group_name":{"references":["var.rsrc_name"]},"service_endpoints":{"constant_value":["Microsoft.Storage"]},"virtual_network_name":{"references":["var.vnet_name"]}},"schema_version":0},{"address":"azurerm_virtual_network.myvnet","mode":"managed","type":"azurerm_virtual_network","name":"myvnet","provider_config_key":"azurerm","expressions":{"address_space":{"references":["var.vnet_addr"]},"location":{"references":["var.location"]},"name":{"references":["var.vnet_name"]},"resource_group_name":{"references":["var.rsrc_name"]}},"schema_version":0}],"variables":{"app_pref":{"default":"10.0.26.64/26"},"app_sub_name":{"default":"gitbucket"},"db_sub_name":{"default":"pgsql"},"location":{},"pg_pref":{"default":"10.0.26.0/26"},"rsrc_name":{},"vnet_addr":{"default":"10.0.26.0/24"},"vnet_name":{"default":"ntwrk"}}}}},"variables":{"location":{"default":"North Europe"},"rsrc_name":{"default":"gitbucketv3"}}}},"relevant_attributes":[{"resource":"module.vnet.azurerm_subnet.psqlsub","attribute":["id"]},{"resource":"module.vnet.azurerm_subnet.appsub","attribute":["id"]},{"resource":"module.shared.data.azurerm_storage_account.accnt","attribute":["primary_access_key"]},{"resource":"module.psql.azurerm_private_dns_zone.mydns","attribute":["name"]},{"resource":"module.psql.azurerm_private_dns_zone.mydns","attribute":["id"]},{"resource":"module.psql.azurerm_postgresql_flexible_server.mydbserver","attribute":["id"]},{"resource":"module.app.azurerm_service_plan.myplan","attribute":["id"]},{"resource":"module.vnet.azurerm_virtual_network.myvnet","attribute":["id"]}]}
